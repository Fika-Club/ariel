# 🧩 Compound Component 패턴

## 📖 개요

Compound Component 패턴은 여러 개의 컴포넌트를 조합하여 하나의 기능 단위를 이루는 React UI 설계 패턴입니다.  
부모 컴포넌트가 상태와 로직을 제어하고, 자식 컴포넌트들이 그 상태를 자연스럽게 공유하며 독립적으로 동작할 수 있도록 구성합니다.

## 🎯 목적

- 컴포넌트 사용자(=개발자)가 선언적으로 UI를 구성할 수 있게 함
- 내부 상태 공유가 필요한 복합 컴포넌트에서 유연한 API 제공
- 외부에서 불필요하게 상태를 관리하지 않아도 되는 구조 제공

## 🧱 구성 방식
- 부모 컴포넌트는 Context를 통해 내부 상태와 로직을 관리합니다.
- 자식 컴포넌트는 Context를 통해 부모 상태를 공유하고 독립적으로 동작합니다.
- 사용자 입장에서는 계층적이고 선언적인 API만 사용하면 됩니다.

## 🧱 작동 방식 요약
| 구성                 | 설명                                                                 |
|---------------------|----------------------------------------------------------------------|
| createContext()     | 상태 저장소를 만들고                            |
| 컴포넌트              | Provider로 상태와 로직을 전달               |
| useContext() | 자식 컴포넌트들이 그 상태를 가져다씀                 |


## 🧱 기존 방식과의 비교
| 기존 방식 (props drilling)           | Compound 방식 (context 공유)                       |
|--------------------------------------|----------------------------------------------------|
| `parent → child → child`로 props 전달 | `parent → context → 모든 자식`으로 공유             |
| 자식이 반드시 props를 받아야 동작함   | 자식은 `useContext()`로 필요한 값만 가져다 씀       |
| 부모가 자식의 구조와 연결을 명시해야 함 | 자식들이 조립만 되어 있으면 자연스럽게 동작함     |
| 사용자(개발자)가 상태/로직을 다 신경 써야 함 | 구조만 작성하면 내부 동작은 부모가 처리함          |


## ✅ 언제 사용하면 좋은가?

| 적합한 경우                           | 설명                                                                 |
|--------------------------------------|----------------------------------------------------------------------|
| Tabs, Accordion, Dropdown, Modal     | 자식 간 상태 공유가 필요한 복합 컴포넌트                            |
| 선언적이고 직관적인 API를 제공하고 싶을 때 | 구조만 작성하면 되고, 내부 상태/로직은 감춰서 추상화 가능               |
| 디자인 시스템에서 재사용성과 확장성이 중요할 때 | 추상화 + API 예측 가능성이 높아지고, 유지보수도 쉬워짐                  |


## ❌ 언제 피하는 게 좋은가?

| 부적합한 경우                          | 설명                                                                  |
|---------------------------------------|-----------------------------------------------------------------------|
| Button, Badge, Card 등 단순 컴포넌트   | 상태 공유 필요 없음. Compound 방식은 오히려 복잡도만 증가시킴          |
| 테스트/디버깅 중심의 상태 관리 구조    | Context 깊이가 깊어지면 상태 추적과 단위 테스트가 어려워질 수 있음     |
| 모든 컴포넌트에 무조건 적용하려는 경우 | 단순한 컴포넌트까지 compound 구조로 만들면 오히려 학습성과 유지비용 증가 |


## 🧭 정리

Compound Component 패턴은 복잡한 UI를 선언적으로 구성하고,  
내부 상태를 깔끔하게 추상화할 수 있는 강력한 설계 방식입니다.

- 상태 공유가 필요한 컴포넌트에 **선택적으로 적용**해야 효과적입니다.
- 단순 컴포넌트에는 오히려 **과한 구조가 될 수 있으므로 지양**하는 것이 좋습니다.
- 중요한 건 **패턴 자체의 통일성**보다 **사용자(=개발자) 입장에서의 API 예측 가능성**과 **사용성의 일관성**입니다.


> 📌 결론: Compound 패턴은 강력하지만, "적절한 곳에 선별 적용"하는 것이 가장 좋은 전략!